!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaf Scanner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 1.5rem;
            background-color: #ffffff;
            border-radius: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        #image-preview {
            width: 100%;
            height: 300px;
            border: 2px dashed #d1d5db;
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin-bottom: 1rem;
            background-color: #f9fafb;
            position: relative;
        }
        #image-preview.has-image {
            border-color: transparent;
        }
        #image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 1rem;
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #10b981;
            animation: spin 1s ease infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .advice-box {
            background-color: #f0fdf4;
            padding: 1.5rem;
            border-radius: 1rem;
            border: 1px solid #dcfce7;
        }
    </style>
</head>
<body class="bg-gray-100 p-4">

    <div class="container">
        <header class="text-center mb-6">
            <h1 class="text-4xl font-bold text-gray-800">Leaf Scanner</h1>
            <p class="text-gray-500 mt-2">Upload a picture of your leaf to get a diagnosis.</p>
        </header>

        <!-- Image Upload and Preview Section -->
        <div id="image-preview" class="flex flex-col items-center justify-center p-4 text-gray-400 text-center">
            <div id="preview-placeholder" class="flex flex-col items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.894-1.788A2 2 0 0113.81 4h2.38a2 2 0 011.664.89l.894 1.788A2 2 0 0021 7h1a1 1 0 011 1v11a1 1 0 01-1 1H3a1 1 0 01-1-1v-11z" />
                </svg>
                <span class="mt-2 text-lg">Your leaf photo will appear here</span>
            </div>
            <img id="leaf-image" class="hidden" src="" alt="Uploaded Leaf">
        </div>

        <!-- Action Buttons -->
        <div class="flex flex-col sm:flex-row gap-4 mb-6">
            <label for="file-input" class="flex-1 w-full text-center px-4 py-3 bg-green-500 text-white rounded-lg cursor-pointer hover:bg-green-600 transition-colors duration-200 font-semibold shadow-md">
                Upload Image
                <input id="file-input" type="file" class="hidden" accept="image/*" capture="camera">
            </label>
            <button id="analyze-btn" class="flex-1 w-full px-4 py-3 bg-gray-200 text-gray-700 rounded-lg cursor-not-allowed transition-colors duration-200 font-semibold shadow-md" disabled>
                Analyze Leaf
            </button>
        </div>

        <!-- Analysis Results Section -->
        <div id="results-section" class="hidden">
            <div id="loading-state" class="flex flex-col items-center justify-center text-center py-8 hidden">
                <div class="loading-spinner"></div>
                <p class="mt-4 text-gray-600 font-medium">Analyzing your leaf...</p>
            </div>

            <div id="advice-state" class="hidden">
                <div class="advice-box">
                    <h3 id="diagnosis-text" class="text-2xl font-semibold text-green-800 mb-2"></h3>
                    <p id="advice-text" class="text-green-700 leading-relaxed"></p>
                </div>
            </div>
        </div>

    </div>

    <script>
        const fileInput = document.getElementById('file-input');
        const imagePreview = document.getElementById('image-preview');
        const leafImage = document.getElementById('leaf-image');
        const analyzeBtn = document.getElementById('analyze-btn');
        const resultsSection = document.getElementById('results-section');
        const loadingState = document.getElementById('loading-state');
        const adviceState = document.getElementById('advice-state');
        const diagnosisText = document.getElementById('diagnosis-text');
        const adviceText = document.getElementById('advice-text');
        const previewPlaceholder = document.getElementById('preview-placeholder');

        let imageUploaded = false;

        const diagnoses = [
            {
                diagnosis: "Healthy Leaf",
                advice: "Great news! Your leaf looks healthy. To prevent future bacterial issues, ensure good air circulation around the plant, avoid overwatering, and keep the leaves dry when you water. Consider applying a preventative organic fungicide if the weather is humid."
            },
            {
                diagnosis: "Mild Bacterial Leaf Spot",
                advice: "Your leaf shows signs of a mild bacterial infection. First, carefully prune and dispose of the affected leaves. Make sure to sterilize your pruning shears after each cut with rubbing alcohol. Improve air circulation by thinning the plant and water at the base to keep the leaves dry. Avoid overhead irrigation."
            },
            {
                diagnosis: "Early Fungal Infection",
                advice: "This leaf appears to have an early fungal disease. Remove and discard all infected leaves immediately to prevent it from spreading. Apply a copper-based fungicide or a neem oil solution. Also, consider improving soil drainage and reducing watering frequency to keep the environment less hospitable for fungi."
            }
        ];

        fileInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    leafImage.src = e.target.result;
                    leafImage.classList.remove('hidden');
                    previewPlaceholder.classList.add('hidden');
                    imagePreview.classList.add('has-image');
                    imageUploaded = true;
                    analyzeBtn.disabled = false;
                    analyzeBtn.classList.remove('bg-gray-200', 'text-gray-700', 'cursor-not-allowed');
                    analyzeBtn.classList.add('bg-green-500', 'text-white', 'hover:bg-green-600', 'cursor-pointer');
                    
                    // Hide previous results
                    resultsSection.classList.add('hidden');
                    adviceState.classList.add('hidden');
                };
                reader.readAsDataURL(file);
            }
        });

        analyzeBtn.addEventListener('click', () => {
            if (!imageUploaded) {
                // In a real app, this would be a custom modal, not an alert.
                // This is a placeholder for the purpose of this demo.
                console.log("Please upload a leaf image first.");
                return;
            }

            // Show loading state
            resultsSection.classList.remove('hidden');
            loadingState.classList.remove('hidden');
            adviceState.classList.add('hidden');
            
            // Simulate a network request with a delay
            setTimeout(() => {
                loadingState.classList.add('hidden');
                adviceState.classList.remove('hidden');

                // Pick a random diagnosis for the demo
                const randomDiagnosis = diagnoses[Math.floor(Math.random() * diagnoses.length)];

                // Display the results
                diagnosisText.textContent = randomDiagnosis.diagnosis;
                adviceText.textContent = randomDiagnosis.advice;
            }, 2000);
        });

    </script>
</body>
</html>

